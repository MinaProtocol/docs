import Page from "@reason/pages/Docs";
import DocLink from "@reason/components/DocLink"
export default Page({ title: "Seed Peers" });

# Сид-пиры

Сид-пиры - наши помощники, которые упрощают подключение к сети для всех.

Большинство нод подключаются к сети Mina с помощью сид-пиров, работающих на сид-нодах.

## Запуск сид-ноды

Два важных момента о сид-нодах:

1. Их адрес должен быть статическим
2. Они нуждаются в высоком уровне времени бесперебойной работы и могут поддерживать множество соединений -- поэтому им следует избегать других активностей в сети, кроме "раздачи".

### Обеспечение и публикация статического адреса 

Прежде всего, вам требуется статический хост, на котором будет развернута ваша нода. Предпочтительно использовать DNS и разместить свою сид-ноду, например, на: `seed.o1test.net`. В качестве альтернативы вы можете настроить статический ipv4-адрес, например `82.230.217.200`.

Во-вторых, вам нужно выбрать порт, на котором будет работать нода. По умолчанию это `8302`.

В-третьих, вам надо предварительно сгенерировать вашу libp2p пару ключей -- это необходимо для вашей идентификации в gossip-сети. Для этого:

```
mina advanced generate-libp2p-keypair
```

Это сгенерирует на вашем компьютере libp2p пару ключей. Также запустите ваш daemon с флагом `--discovery-keypair`:

Наконец, вы опубликуете свой DNS-адрес следующим образом:

```
/dns4/seed.o1test.net/tcp/8302/p2p/12D3KooWGDHtsPUS8dZk3x3FUgsXCWwpnSJ6W7EwkWZKBZXczkwC
```

Или статический IP-адрес таким образом:

```
/ip4/82.230.217.200/tcp/8302/p2p/12D3KooWCE97fGwuDCicVNK3ZWF8fVzfNezp3uGjmSc8VrRFem6a
```

Эта адресная строка может быть использована для подключения к вам других участников.

### Настройка ноды для обеспечения бесперебойной работы и высокоскоростного подключения

Во-первых, не запускайте производство блоков или снарк-воркинг на этой ноде. Прекратите эти процессы полностью. Если вы этого не сделаете, пространство для исполнения логики ноды резко сокращается.

Предпочтительнее запускать ноды с большим флагом `--max-connection`. По крайней мере, 100. Вы по-прежнему сможете быть сидом для более чем 100 нод, просто вы сможете поддерживать единовременное соединение только со 100 нодами.

## Пример команды daemon

Когда мы произведем все необходимую сборку, базовая конфигурация сид-ноды может выглядеть как в примере ниже.

```
mina daemon \
--seed \
--peer-list-url https://storage.googleapis.com/mina-seed-lists/mainnet_seeds.txt \
--file-log-level Info -log-level Info \
--log-block-creation false \
--log-snark-work-gossip false \
--log-txn-pool-gossip false \
--metrics-port 9100 \
--discovery-keypair /keys/my-libp2p \
--generate-genesis-proof true \
--max-connection 100
```

Обратите внимание, что значение `--discovery-keypair` может измениться в зависимости от того, где вы сохранили свою libp2p пару ключей в предыдущих шагах. Также убедитесь, что вы используете более позднюю версию, чем `1.1.2` для обработки `Mainnet` трафика.

Если вы используете Docker, то ниже приведен аналогичный пример.

```
docker run --name mina-seed-node -d \
--restart always \
-p 8302:8302 \
-p 9100:9100 \
-v $(pwd)/keys:/root/keys:ro \
-v $(pwd)/.mina-config:/root/.mina-config \
--env CODA_LIBP2P_PASS='PASS' \
minaprotocol/mina-daemon-baked:1.1.2-0975867 daemon \
--discovery-keypair /keys/libp2p-keys \
--peer-list-url https://storage.googleapis.com/mina-seed-lists/mainnet_seeds.txt \
--metrics-port 9100 \
--seed \
--max-connection 100 \
--file-log-level Info \
--log-level Info
```

Обязательно замените `--env CODA_LIBP2P_PASS=''` своим правильным паролем для пары ключей libp2p. Как и в предыдущем примере убедитесь, что вы установили правильное значение с помощью `--discovery-keypair`.

## Список пиров

Один список пиров будет содержать несколько нод O(1) Labs, и еще один - гораздо большую группу адресов от лиц, несвязанных с O(1). Этот список предназначен для нод, которые подходят для роли сид-пиров и должны будут делать все возможное, чтобы поддерживать список в актуальном состоянии.

## Альтернативные списки пиров

Наша сеть децентрализованная -- мы поощряем других членов сообщества размещать сид-списки. Чтобы создать список, поговорите с теми, кому вы доверяете, и используйте их адреса в качестве сид-пиров.

Чтобы использовать такие альтернативные списки, вы можете поменять параметр `-peer-list-file` или `-peer-list-url`, чтобы указать на другой список.
